{% extends 'base.html' %}

{% block content %}
<div class="property-list-container">
    <h2>Imóveis Disponíveis</h2>
    {% if imoveis %}
        <div class="property-list-row">
            {% for imovel in imoveis %}
                <div class="property-list-card">
                    <h5>{{ imovel.titulo }}</h5>
                    <p>
                        <strong>Tipo:</strong> {{ imovel.get_tipo_display }}<br>
                        <strong>Operação:</strong> {{ imovel.get_operacao_display }}<br>
                        <strong>Valor:</strong> R$ {{ imovel.valor }}<br>
                        <strong>Área:</strong> {{ imovel.area }}m²<br>
                        <strong>Quartos:</strong> {{ imovel.quartos }}<br>
                        <strong>Banheiros:</strong> {{ imovel.banheiros }}<br>
                        <strong>Vagas:</strong> {{ imovel.vagas_garagem }}<br>
                        <strong>Endereço:</strong> {{ imovel.endereco }}
                    </p>
                    <p>{{ imovel.descricao }}</p>
                    {% if user.is_cliente %}
                        {% if imovel.id in imoveis_com_interesse %}
                            <button class="btn btn-success" disabled>Interesse Registrado</button>
                        {% else %}
                            <form method="post" action="{% url 'demonstrar_interesse' imovel.id %}" style="width:100%;">
                                {% csrf_token %}
                                <button type="submit" class="btn btn-primary">Demonstrar Interesse</button>
                            </form>
                        {% endif %}
                    {% endif %}
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="property-list-alert">
            Não há imóveis disponíveis no momento.
        </div>
    {% endif %}
</div>
{% endblock %}
 